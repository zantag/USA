# Unraid SSH Alert (USA)

Bash —Å–∫—Ä–∏–ø—Ç –∑–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ SSH –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç –Ω–∞ Unraid —Å—ä—Ä–≤—ä—Ä–∏ —Å push –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á—Ä–µ–∑ ntfy.sh.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–¢–æ–∑–∏ —Å–∫—Ä–∏–ø—Ç —Å–ª–µ–¥–∏ SSH –ª–æ–≥–æ–≤–µ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ –∏ –∏–∑–ø—Ä–∞—â–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏:
- ‚úÖ –£—Å–ø–µ—à–µ–Ω SSH –≤—Ö–æ–¥
- ‚ùå –ù–µ—É—Å–ø–µ—à–µ–Ω –æ–ø–∏—Ç –∑–∞ –≤—Ö–æ–¥
- üö™ SSH –∏–∑—Ö–æ–¥

–ù–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏—Ç–µ –≤–∫–ª—é—á–≤–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ—Ç–æ –∏–º–µ –∏ IP –∞–¥—Ä–µ—Å.

## ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏

- **–†–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ò–∑–ø–æ–ª–∑–≤–∞ `tail -F` –∑–∞ –Ω–µ–ø—Ä–µ–∫—ä—Å–Ω–∞—Ç–æ —Å–ª–µ–¥–µ–Ω–µ –Ω–∞ syslog
- **–ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞ —Å–ø–∞–º –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (5 —Å–µ–∫ –∑–∞ –Ω–µ—É—Å–ø–µ—à–Ω–∏ –æ–ø–∏—Ç–∏, 30 —Å–µ–∫ –∑–∞ –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ)
- **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è** - –†–∞–∑–ª–∏—á–Ω–∏ –Ω–∏–≤–∞ –Ω–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–ø–æ—Ä–µ–¥ —Ç–∏–ø–∞ —Å—ä–±–∏—Ç–∏–µ
- **–õ–µ—Å–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - –°–∞–º–æ –µ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—ä—Ä –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ

## üöÄ –ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—è

### 1. –ò–∑—Ç–µ–≥–ª–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç–∞

```bash
wget https://raw.githubusercontent.com/zantag/USA/main/unraid-ssh-alert.sh
chmod +x unraid-ssh-alert.sh
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π—Ç–µ ntfy.sh topic

–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç–∞ –∏ –ø—Ä–æ–º–µ–Ω–µ—Ç–µ `NTFY_TOPIC`:

```bash
nano unraid-ssh-alert.sh
```

–ù–∞–º–µ—Ä–µ—Ç–µ —Ä–µ–¥–∞:
```bash
NTFY_TOPIC="put-your-ntfy-topic"
```

–ò –≥–æ –ø—Ä–æ–º–µ–Ω–µ—Ç–µ —Å –≤–∞—à–∏—è ntfy.sh topic (–Ω–∞–ø—Ä–∏–º–µ—Ä: `my-unraid-alerts`).

### 3. –¢–µ—Å—Ç–≤–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç–∞

```bash
./unraid-ssh-alert.sh
```

–û—Ç–≤–æ—Ä–µ—Ç–µ –Ω–æ–≤–∞ SSH —Å–µ—Å–∏—è –∫—ä–º —Å—ä—Ä–≤—ä—Ä–∞ - —Ç—Ä—è–±–≤–∞ –¥–∞ –ø–æ–ª—É—á–∏—Ç–µ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.

## üîß –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: User Scripts Plugin (–ø—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ)

1. –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ **User Scripts** plugin –æ—Ç Community Applications
2. –°—ä–∑–¥–∞–π—Ç–µ –Ω–æ–≤ —Å–∫—Ä–∏–ø—Ç
3. –ö–æ–ø–∏—Ä–∞–π—Ç–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ `unraid-ssh-alert.sh`
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–∞ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ **At Startup of Array**

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß—Ä–µ–∑ /boot/config/go

–î–æ–±–∞–≤–µ—Ç–µ –≤ `/boot/config/go`:

```bash
/path/to/unraid-ssh-alert.sh &
```

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ ntfy.sh

1. –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ ntfy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–∏:
   - [Android](https://play.google.com/store/apps/details?id=io.heckel.ntfy)
   - [iOS](https://apps.apple.com/app/ntfy/id1625396347)

2. –ê–±–æ–Ω–∏—Ä–∞–π—Ç–µ —Å–µ –∑–∞ –≤–∞—à–∏—è topic (—Å—ä—â–∏—è—Ç –∫–∞—Ç–æ –≤ `NTFY_TOPIC`)

3. –ì–æ—Ç–æ–≤–æ! –©–µ –ø–æ–ª—É—á–∞–≤–∞—Ç–µ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ SSH –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç

## üîí –°–∏–≥—É—Ä–Ω–æ—Å—Ç

- –°–∫—Ä–∏–ø—Ç—ä—Ç —Ä–∞–±–æ—Ç–∏ –ª–æ–∫–∞–ª–Ω–æ –∏ –Ω–µ –∏–∑–ø—Ä–∞—â–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –ò–∑–ø–æ–ª–∑–≤–∞ –ø—É–±–ª–∏—á–Ω–∏—è ntfy.sh —Å—ä—Ä–≤—ä—Ä (–∏–ª–∏ –º–æ–∂–µ—Ç–µ –¥–∞ —Ö–æ—Å—Ç–≤–∞—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω)
- –ó–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç, —Ä–∞–∑–≥–ª–µ–¥–∞–π—Ç–µ [ntfy authentication](https://docs.ntfy.sh/publish/#authentication)

## üìù –ò–∑–∏—Å–∫–≤–∞–Ω–∏—è

- Unraid 6.x –∏–ª–∏ –ø–æ-–Ω–æ–≤–∞ –≤–µ—Ä—Å–∏—è
- `curl` (–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω –Ω–∞ Unraid)
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –≤—Ä—ä–∑–∫–∞ –∑–∞ ntfy.sh –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üêõ –û—Ç—Å—Ç—Ä–∞–Ω—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏

### –ù–µ –ø–æ–ª—É—á–∞–≤–∞–º –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

1. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ —Å–∫—Ä–∏–ø—Ç—ä—Ç —Ä–∞–±–æ—Ç–∏:
   ```bash
   ps aux | grep unraid-ssh-alert
   ```

2. –¢–µ—Å—Ç–≤–∞–π—Ç–µ ntfy.sh —Ä—ä—á–Ω–æ:
   ```bash
   curl -d "Test message" https://ntfy.sh/your-topic
   ```

3. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –ª–æ–≥–æ–≤–µ—Ç–µ:
   ```bash
   tail -f /var/log/syslog | grep sshd
   ```

### –ü–æ–ª—É—á–∞–≤–∞–º —Ç–≤—ä—Ä–¥–µ –º–Ω–æ–≥–æ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–°–∫—Ä–∏–ø—Ç—ä—Ç –∏–º–∞ –≤–≥—Ä–∞–¥–µ–Ω–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è. –ê–∫–æ –≤—Å–µ –æ—â–µ –ø–æ–ª—É—á–∞–≤–∞—Ç–µ —Ç–≤—ä—Ä–¥–µ –º–Ω–æ–≥–æ, –º–æ–∂–µ—Ç–µ –¥–∞ —É–≤–µ–ª–∏—á–∏—Ç–µ `DUP_TIME` —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ –≤ —Å–∫—Ä–∏–ø—Ç–∞.

## üìÑ –õ–∏—Ü–µ–Ω–∑

MIT License - —Å–≤–æ–±–æ–¥–Ω–æ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è

## ü§ù –ü—Ä–∏–Ω–æ—Å

Pull requests —Å–∞ –¥–æ–±—Ä–µ –¥–æ—à–ª–∏! –ó–∞ –≥–æ–ª–µ–º–∏ –ø—Ä–æ–º–µ–Ω–∏, –º–æ–ª—è –ø—ä—Ä–≤–æ –æ—Ç–≤–æ—Ä–µ—Ç–µ issue –∑–∞ –¥–∏—Å–∫—É—Å–∏—è.

## üë§ –ê–≤—Ç–æ—Ä

**zantag**

---

‚≠ê –ê–∫–æ —Ç–æ–∑–∏ —Å–∫—Ä–∏–ø—Ç –≤–∏ –µ –ø–æ–ª–µ–∑–µ–Ω, –æ—Å—Ç–∞–≤–µ—Ç–µ –∑–≤–µ–∑–¥–∞ –Ω–∞ repo-—Ç–æ!
